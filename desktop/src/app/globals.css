@import "tailwindcss";

/**
 * Global styles for Vibe Manager applications
 * Contains CSS variables for theme, utility classes, and base styles
 */

@theme {
  /* App icon-inspired color system with modern gradients */
  --color-background: oklch(1 0 0);
  --color-background-gradient: linear-gradient(135deg, oklch(0.99 0.005 195) 0%, oklch(1 0 0) 30%, oklch(0.985 0.01 195) 100%);
  --color-foreground: oklch(0.15 0 0);
  --color-card: oklch(0.99 0 0);
  --color-card-foreground: oklch(0.18 0 0);
  --color-popover: oklch(1 0 0);
  --color-popover-foreground: oklch(0.15 0 0);
  
  /* Primary: Based on #0F7E8C (bright teal) */
  --color-primary: oklch(0.52 0.09 195);
  --color-primary-foreground: oklch(0.98 0 0);
  
  /* Secondary: Light grays on white */
  --color-secondary: oklch(0.97 0 0);
  --color-secondary-foreground: oklch(0.2 0 0);
  --color-muted: oklch(0.98 0 0);
  --color-muted-foreground: oklch(0.4 0 0);
  
  /* Accent: Light teal variant based on #5FB1BE */
  --color-accent: oklch(0.97 0.01 195);
  --color-accent-foreground: oklch(0.15 0.04 206);
  
  /* Status colors */
  --color-destructive: oklch(0.55 0.22 25);
  --color-destructive-foreground: oklch(0.97 0.01 25);
  --color-warning: oklch(0.68 0.15 65);
  --color-warning-foreground: oklch(0.18 0.05 65);
  --color-warning-background: oklch(0.95 0.04 65);
  --color-warning-border: oklch(0.8 0.08 65);
  --color-info: oklch(0.58 0.12 220);
  --color-info-foreground: oklch(0.18 0.05 220);
  --color-info-background: oklch(0.95 0.03 220);
  --color-info-border: oklch(0.8 0.06 220);
  --color-success: oklch(0.58 0.15 145);
  --color-success-foreground: oklch(0.18 0.05 145);
  --color-success-background: oklch(0.95 0.04 145);
  --color-success-border: oklch(0.8 0.08 145);
  
  /* UI elements on white */
  --color-border: oklch(0.92 0 0);
  --color-border-modal: oklch(0.88 0 0);
  --color-input: oklch(0.985 0 0);
  --color-ring: oklch(0.52 0.09 195);
  --color-chart-1: 12 76% 61%;
  --color-chart-2: 173 58% 39%;
  --color-chart-3: 197 37% 24%;
  --color-chart-4: 43 74% 66%;
  --color-chart-5: 27 87% 67%;

  --radius: 0.5rem;
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --sidebar-width: 320px;

  --animate-collapsible-down: collapsible-down 0.2s ease-out;
  --animate-collapsible-up: collapsible-up 0.2s ease-out;
  --animate-appear: appear 0.3s ease-out;
  --animate-progress-indeterminate: progress-indeterminate 1.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;

  @keyframes collapsible-down {
    from { height: 0; opacity: 0; }
    to { height: var(--radix-collapsible-content-height); opacity: 1; }
  }

  @keyframes collapsible-up {
    from { height: var(--radix-collapsible-content-height); opacity: 1; }
    to { height: 0; opacity: 0; }
  }

  @keyframes appear {
    from { opacity: 0; transform: scale(0.8); }
    to { opacity: 1; transform: scale(1); }
  }

  @keyframes progress-indeterminate {
    0% { transform: translateX(-100%); width: 40%; }
    50% { width: 70%; }
    100% { transform: translateX(100%); width: 40%; }
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Consistent transition for interactive elements */
  .transition-interactive {
    transition: all 0.2s ease;
  }

  /* Consistent spacing for content areas */
  .content-spacing {
    @apply space-y-6;
  }

  /* Consistent button group spacing */
  .button-group {
    @apply flex gap-2;
  }

  /* Standard modal and panel padding */
  .modal-padding {
    @apply p-6;
  }

  .panel-padding {
    @apply p-4;
  }

  /* Improved focus styles - accessible but modern */
  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-ring/70;
  }

  /* Softer shadow variants */
  .shadow-soft {
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05), 0 1px 2px 0 rgba(0, 0, 0, 0.03);
  }

  .shadow-soft-md {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.06), 0 2px 4px -1px rgba(0, 0, 0, 0.04);
  }

  /* White background variations */
  .bg-subtle {
    background: linear-gradient(135deg, hsl(var(--background)) 0%, hsl(var(--muted)) 100%);
  }

  .bg-card-subtle {
    background: linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--background)) 100%);
  }

  /* WCAG-compliant text variants */
  .text-soft {
    color: hsl(var(--foreground));
  }

  .text-muted-soft {
    color: hsl(var(--muted-foreground));
  }

  /* Subtle border variations */
  .border-modal {
    border-color: hsl(var(--border-modal));
  }
  .border-soft {
    border-color: hsl(var(--border));
  }

  .border-subtle {
    border-color: hsl(var(--border) / 0.5);
  }

  /* Soft interaction states */
  .hover-soft {
    @apply hover:bg-accent/20 hover:text-accent-foreground transition-all duration-300;
  }

  /* Enhanced glass morphism effects with teal accents */
  .glass {
    background: color-mix(in srgb, hsl(var(--primary)) 5%, transparent);
    backdrop-filter: blur(10px);
    border: 1px solid color-mix(in srgb, hsl(var(--primary)) 10%, transparent);
  }

  .glass-card {
    background: linear-gradient(135deg, 
      color-mix(in srgb, hsl(var(--primary)) 8%, transparent) 0%, 
      color-mix(in srgb, hsl(var(--primary)) 3%, transparent) 100%);
    backdrop-filter: blur(8px);
    border: 1px solid color-mix(in srgb, hsl(var(--primary)) 8%, transparent);
  }

  /* Teal gradient utilities matching app icon */
  .bg-teal-gradient {
    background: linear-gradient(135deg, hsl(var(--primary)) 0%, 
      color-mix(in srgb, hsl(var(--primary)), black 60%) 50%, 
      color-mix(in srgb, hsl(var(--primary)), black 80%) 100%);
  }

  .bg-teal-gradient-light {
    background: linear-gradient(135deg, 
      color-mix(in srgb, hsl(var(--primary)) 10%, transparent) 0%, 
      color-mix(in srgb, hsl(var(--primary)) 5%, transparent) 100%);
  }

  /* Loading progress bar animations */
  @keyframes progress {
    0% {
      width: 0;
      left: 0;
    }
    50% {
      width: 40%;
      left: 30%;
    }
    100% {
      width: 15%;
      left: 100%;
    }
  }

  .animate-progress {
    animation: progress 2s ease-in-out infinite;
  }

  /* Use the progress-indeterminate animation defined in @theme */
  .animate-progress-indeterminate {
    animation: var(--animate-progress-indeterminate);
  }

  /* Slower pulse animation for placeholders */
  @keyframes pulse-slow {
    0%,
    100% {
      opacity: 0.5;
    }
    50% {
      opacity: 0.2;
    }
  }

  .animate-pulse-slow {
    animation: pulse-slow 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Standard hover effect for cards and interactive elements */
  .hover-card {
    @apply hover:shadow-md transition-all duration-200;
  }

  /* Standardized heights for form elements */
  .h-form-element {
    @apply h-9;
  }

  /* Standard spacing for form sections */
  .form-section-spacing {
    @apply space-y-6;
  }

  /* Consistent form label styling */
  .form-label {
    @apply text-sm font-medium mb-2 block;
  }

  /* Standard card padding */
  .card-padding {
    @apply p-4 sm:p-6;
  }

  /* Subtle loading animations */
  .pulse-subtle {
    @apply animate-pulse opacity-70;
  }

  /* Navigation bar enhancements with backdrop */
  .nav-bar {
    @apply relative w-full py-4 border-b border-border/30 mb-4 backdrop-blur-sm;
    background: linear-gradient(to right, hsl(var(--color-background)), hsl(var(--color-background)/0.98));
  }

  .nav-bar::after {
    @apply absolute bottom-0 left-0 right-0 h-px;
    content: '';
    background: linear-gradient(to right, transparent, hsl(var(--color-border)), transparent);
  }

  .nav-loading-indicator {
    @apply flex items-center text-xs text-muted-foreground px-3 py-1.5 rounded-full;
    @apply bg-gradient-to-r from-muted/40 to-muted/20 border border-border/20 backdrop-blur-sm;
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .nav-actions {
    @apply flex items-center gap-2;
  }

  /* Consistent error and warning state styling */
  .error-state {
    @apply bg-destructive/10 border border-destructive/20 text-destructive rounded-lg p-4;
  }

  .warning-state {
    @apply bg-warning-background border border-warning-border text-warning-foreground rounded-lg p-4;
  }

  .info-state {
    @apply bg-info-background border border-info-border text-info-foreground rounded-lg p-4;
  }

  .success-state {
    @apply bg-success-background border border-success-border text-success-foreground rounded-lg p-4;
  }

  /* Custom Checkbox Styling */
  .custom-checkbox-container {
    @apply relative inline-flex items-center justify-center;
  }

  .custom-checkbox {
    @apply appearance-none inline-block align-middle select-none flex-shrink-0 cursor-pointer;
    @apply w-4 h-4 rounded-[3px] border-2;
    @apply border-border bg-background; /* Solid background for better contrast against muted row backgrounds */
    @apply transition-all duration-150 ease-in-out;
    @apply shadow-sm; /* Subtle shadow for depth */
  }

  .custom-checkbox:hover:not(:disabled) {
    @apply border-primary/70 shadow-md;
  }

  .custom-checkbox:focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background shadow-md;
    @apply border-primary; /* Stronger border on focus */
  }

  .custom-checkbox:checked {
    @apply bg-primary border-primary;
  }

  .custom-checkbox.destructive:checked {
    @apply bg-destructive border-destructive;
  }

  .custom-checkbox:disabled {
    @apply border-border/40 bg-muted/50 cursor-not-allowed opacity-60;
  }

  .custom-checkbox:checked:disabled {
    @apply bg-primary/40 border-primary/40;
  }

  .custom-checkbox.destructive:checked:disabled {
    @apply bg-destructive/40 border-destructive/40;
  }

  .custom-checkbox-checkmark {
    @apply absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 transition-opacity duration-100 ease-in-out;
  }

  .custom-checkbox:checked + .custom-checkbox-checkmark {
    @apply opacity-100;
  }

  .custom-checkbox:checked:disabled + .custom-checkbox-checkmark {
    @apply opacity-60; /* Dim checkmark on disabled checked */
  }

  /* Enhanced styling for checkboxes in selected file rows */
  .file-row-selected .custom-checkbox {
    @apply border-border/80 bg-background shadow-md; /* Enhanced contrast against muted background with more prominent shadow */
  }

  .file-row-selected .custom-checkbox:hover:not(:disabled) {
    @apply border-primary/80 shadow-lg bg-background;
  }

  .file-row-selected .custom-checkbox:checked {
    @apply bg-primary border-primary shadow-md;
  }

  .file-row-selected .custom-checkbox.destructive:checked {
    @apply bg-destructive border-destructive shadow-md;
  }

  /* Dark mode specific overrides for better visibility in selected rows */
  .dark .file-row-selected .custom-checkbox {
    @apply border-border bg-card shadow-lg; /* Stronger contrast in dark mode */
  }

  .dark .file-row-selected .custom-checkbox:hover:not(:disabled) {
    @apply border-primary/90 shadow-xl;
  }

  .dark .file-row-selected .custom-checkbox:checked {
    /* Consistent darker teal for selected rows */
    background-color: color-mix(in oklch, var(--color-primary) 70%, black 30%);
    border-color: color-mix(in oklch, var(--color-primary) 70%, black 30%);
  }

  .dark .file-row-selected .custom-checkbox.destructive:checked {
    /* Consistent darker red for selected rows */
    background-color: color-mix(in oklch, var(--color-destructive) 70%, black 30%);
    border-color: color-mix(in oklch, var(--color-destructive) 70%, black 30%);
  }

  /* SVG checkmark colors for better visibility */
  .custom-checkbox:checked + .custom-checkbox-checkmark svg {
    color: var(--color-primary-foreground);
  }

  .custom-checkbox.destructive:checked + .custom-checkbox-checkmark svg {
    color: var(--color-destructive-foreground);
  }

  /* Dark mode overrides for better checkmark visibility */
  .dark .custom-checkbox:checked + .custom-checkbox-checkmark svg {
    color: oklch(0.98 0 0); /* Explicit light color for dark mode primary checkmark */
  }

  .dark .custom-checkbox.destructive:checked + .custom-checkbox-checkmark svg {
    color: oklch(0.97 0.01 25); /* Explicit light color for dark mode destructive checkmark */
  }
  
  /* Dark mode improvements for regular checkboxes */
  .dark .custom-checkbox {
    @apply border-zinc-600 bg-zinc-900/50;
  }
  .dark .custom-checkbox:hover:not(:disabled) {
    @apply border-primary/80 bg-zinc-800/70;
  }
  .dark .custom-checkbox:checked {
    /* Use darker teal for better contrast with white checkmark */
    background-color: color-mix(in oklch, var(--color-primary) 70%, black 30%);
    border-color: color-mix(in oklch, var(--color-primary) 70%, black 30%);
  }
  .dark .custom-checkbox.destructive:checked {
    /* Use darker red for better contrast with white checkmark */
    background-color: color-mix(in oklch, var(--color-destructive) 70%, black 30%);
    border-color: color-mix(in oklch, var(--color-destructive) 70%, black 30%);
  }
}

@layer base {
  :root {
    /* Legacy color variables for compatibility */
    --background: var(--color-background);
    --background-gradient: var(--color-background-gradient);
    --foreground: var(--color-foreground);
    --card: var(--color-card);
    --card-foreground: var(--color-card-foreground);
    --popover: var(--color-popover);
    --popover-foreground: var(--color-popover-foreground);
    --primary: var(--color-primary);
    --primary-foreground: var(--color-primary-foreground);
    --secondary: var(--color-secondary);
    --secondary-foreground: var(--color-secondary-foreground);
    --muted: var(--color-muted);
    --muted-foreground: var(--color-muted-foreground);
    --accent: var(--color-accent);
    --accent-foreground: var(--color-accent-foreground);
    --destructive: var(--color-destructive);
    --destructive-foreground: var(--color-destructive-foreground);
    --warning: var(--color-warning);
    --warning-foreground: var(--color-warning-foreground);
    --warning-background: var(--color-warning-background);
    --warning-border: var(--color-warning-border);
    --info: var(--color-info);
    --info-foreground: var(--color-info-foreground);
    --info-background: var(--color-info-background);
    --info-border: var(--color-info-border);
    --success: var(--color-success);
    --success-foreground: var(--color-success-foreground);
    --success-background: var(--color-success-background);
    --success-border: var(--color-success-border);
    --border: var(--color-border);
    --border-modal: var(--color-border-modal);
    --input: var(--color-input);
    --ring: var(--color-ring);
    --chart-1: var(--color-chart-1);
    --chart-2: var(--color-chart-2);
    --chart-3: var(--color-chart-3);
    --chart-4: var(--color-chart-4);
    --chart-5: var(--color-chart-5);
  }

  .dark {
    /* Dark mode with icon-inspired navy and teal accents */
    /* Background: Lighter navy for better visibility */
    --color-background: oklch(0.18 0.02 206);
    --color-background-gradient: linear-gradient(135deg, oklch(0.15 0.02 206) 0%, oklch(0.18 0.02 206) 40%, oklch(0.20 0.03 195) 100%);
    --color-foreground: oklch(0.9 0 0);
    
    /* Cards: Slightly lighter navy */
    --color-card: oklch(0.22 0.02 206);
    --color-card-foreground: oklch(0.88 0 0);
    --color-popover: oklch(0.20 0.02 206);
    --color-popover-foreground: oklch(0.9 0 0);
    
    /* Primary: Brighter teal for dark mode */
    --color-primary: oklch(0.65 0.08 195);
    --color-primary-foreground: oklch(0.12 0.02 206);
    
    /* Secondary and muted: Navy tones */
    --color-secondary: oklch(0.28 0.02 206);
    --color-secondary-foreground: oklch(0.82 0 0);
    --color-muted: oklch(0.24 0.02 206);
    --color-muted-foreground: oklch(0.62 0 0);
    
    /* Accent: Light teal with good contrast */
    --color-accent: oklch(0.3 0.03 195);
    --color-accent-foreground: oklch(0.85 0 0);
    
    /* Status colors */
    --color-destructive: oklch(0.6 0.22 25);
    --color-destructive-foreground: oklch(0.9 0.01 25);
    --color-warning: oklch(0.65 0.15 65);
    --color-warning-foreground: oklch(0.95 0.02 65);
    --color-warning-background: oklch(0.2 0.08 65);
    --color-warning-border: oklch(0.4 0.12 65);
    --color-info: oklch(0.6 0.12 220);
    --color-info-foreground: oklch(0.95 0.02 220);
    --color-info-background: oklch(0.2 0.06 220);
    --color-info-border: oklch(0.4 0.08 220);
    --color-success: oklch(0.45 0.08 145);
    --color-success-foreground: oklch(0.88 0.01 145);
    --color-success-background: oklch(0.16 0.04 145);
    --color-success-border: oklch(0.3 0.06 145);
    
    /* UI elements with navy tones */
    --color-border: oklch(0.34 0.02 206);
    --color-border-modal: oklch(0.30 0.05 195);
    --color-input: oklch(0.26 0.02 206);
    --color-ring: oklch(0.65 0.08 195);
    
    /* Variable mappings for dark mode */
    --background-gradient: var(--color-background-gradient);
    --border: var(--color-border);
    --border-modal: var(--color-border-modal);
    --input: var(--color-input);
    --ring: var(--color-ring);
    
    /* Charts with teal family */
    --color-chart-1: oklch(0.7 0.15 25);
    --color-chart-2: oklch(0.65 0.08 195);
    --color-chart-3: oklch(0.6 0.08 65);
    --color-chart-4: oklch(0.75 0.15 285);
    --color-chart-5: oklch(0.72 0.18 345);
  }

  
  html {
    background: var(--background-gradient);
    margin: 0;
    padding: 0;
  }
  
  body {
    @apply text-foreground antialiased;
    background: inherit;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    margin: 0;
    padding: 0;
    min-height: 100vh;
  }
  
  #root {
    background: inherit;
    min-height: 100vh;
  }
}

/* Custom scrollbar styles */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-thumb {
  background-color: color-mix(in srgb, hsl(var(--foreground)) 15%, transparent);
  border-radius: 6px;
  transition: background-color 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background-color: color-mix(in srgb, hsl(var(--foreground)) 25%, transparent);
}

/* Scrollbar track */
::-webkit-scrollbar-track {
  background: color-mix(in srgb, hsl(var(--foreground)) 3%, transparent);
  border-radius: 6px;
}


/* Better colors for dialog backgrounds in dark mode */
.dark [role="dialog"] {
  background-color: hsl(var(--card)) !important;
  border-color: hsl(var(--border));
}

/* Ensure job details modal has solid background */
.dark [data-radix-dialog-content] {
  background-color: hsl(var(--card)) !important;
  backdrop-filter: none !important;
}

/* Fix ScrollArea table display issues in background jobs sidebar */
[data-radix-scroll-area-viewport] {
  display: block !important;
  min-width: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
}

[data-radix-scroll-area-viewport] > * {
  display: block !important;
  min-width: 0 !important;
  max-width: 100% !important;
}
