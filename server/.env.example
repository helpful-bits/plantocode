# Server Application Configuration
APP_NAME=vibe-manager
ENVIRONMENT=development # Or 'production', 'staging'
RUST_LOG=debug

# Database Configuration (Mandatory)
DATABASE_URL=postgresql://user:password@host:port/database

# Server Network Configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
CORS_ORIGINS=* # Comma-separated list of allowed origins, or '*' for all
SERVER_URL=http://localhost:8080 # Full URL for the server. CRITICAL for Auth0 redirect flow. E.g., http://localhost:8080 or https://yourdomain.com

# API Keys (Mandatory unless specified)
OPENROUTER_API_KEY=your_openrouter_api_key_here # For proxying LLM requests
# REPLICATE_API_TOKEN=your_replicate_api_token_here # Optional: Legacy transcription support (not used with direct OpenAI)
OPENAI_API_KEY=your_openai_api_key_here # For direct transcription with GPT-4o-transcribe

# Auth0 Configuration (Mandatory)
AUTH0_DOMAIN="your-auth0-tenant.auth0.com"
AUTH0_API_AUDIENCE="https://vibemanager.app"
# Mandatory: Auth0 Machine-to-Machine (M2M) application Client ID for server-side refresh token exchange.
AUTH0_SERVER_CLIENT_ID="your_auth0_server_m2m_app_client_id"
# Mandatory: Auth0 Machine-to-Machine (M2M) application Client Secret for server-side refresh token exchange.
AUTH0_SERVER_CLIENT_SECRET="your_auth0_server_m2m_app_client_secret"
SERVER_AUTH0_CALLBACK_URL="http://localhost:8080/auth/auth0/callback"
SERVER_AUTH0_LOGGED_OUT_URL="http://localhost:8080/auth/auth0/logged-out"

# Authentication Configuration (Mandatory)
JWT_SECRET=a_very_strong_and_long_random_secret_key_for_jwt # Secret key for signing JWTs
JWT_ACCESS_TOKEN_DURATION_DAYS=30 # How long JWTs are valid

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=60000 # Window for rate limiting in milliseconds (e.g., 60000 for 1 minute)
RATE_LIMIT_MAX_REQUESTS=100 # Max requests per window per IP
RATE_LIMIT_USE_REDIS=false # Set to true to use Redis for distributed rate limiting across multiple instances
RATE_LIMIT_REDIS_URL=redis://localhost:6379 # Redis connection URL (required if RATE_LIMIT_USE_REDIS=true)
RATE_LIMIT_CLEANUP_INTERVAL_SECS=300 # Interval in seconds for cleaning up in-memory rate limit stores

# Auth Store Configuration
POLLING_STORE_EXPIRY_MINS=30 # Expiry time for auth polling store entries
AUTH0_STATE_STORE_EXPIRY_MINS=30 # Expiry time for Auth0 state store entries
AUTH_STORE_CLEANUP_INTERVAL_SECS=300 # Interval for cleaning up expired auth store entries

# Subscription Configuration
DEFAULT_TRIAL_DAYS=7 # Default trial period in days for new users

# Stripe Configuration (Mandatory for billing features)
STRIPE_SECRET_KEY=sk_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret_here
# Stripe checkout and portal redirect URLs (point to your frontend)
STRIPE_CHECKOUT_SUCCESS_URL="http://localhost:1420/account?checkout=success"
STRIPE_CHECKOUT_CANCEL_URL="http://localhost:1420/account?checkout=canceled"
STRIPE_PORTAL_RETURN_URL="http://localhost:1420/account"

# Deep Link Configuration - Used for Stripe checkout callbacks
APP_DEEP_LINK_SCHEME=vibe-manager