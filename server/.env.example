# Server Application Configuration
APP_NAME=vibe-manager
ENVIRONMENT=development # Or 'production', 'staging'
RUST_LOG=debug

# Debug Configuration
ENABLE_STREAM_DEBUG_LOGGING=false # Set to 'true' to enable stream debug file logging (development only)

# Database Configuration (Mandatory)
# For production, use SSL connections: postgres://user:password@host:port/database?sslmode=require
DATABASE_URL=postgresql://user:password@host:port/database
SQLX_OFFLINE=true # Set to true to use offline mode for SQLx (useful for CI/CD)

# Server Network Configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
CORS_ORIGINS=* # Comma-separated list of allowed origins, or '*' for all
SERVER_URL=http://localhost:8080 # Full URL for the server. CRITICAL for Auth0 redirect flow. E.g., http://localhost:8080 or https://yourdomain.com
SERVER_CLIENT_REQUEST_TIMEOUT_SECS=1740 # Client request timeout in seconds (default: 1740 = 29 minutes). Increase for long-running AI operations
WEBSITE_BASE_URL=http://localhost:3000 # Base URL for the main website (e.g., http://localhost:3000 or https://vibemanager.app for production)

# API Keys (Mandatory unless specified)
OPENROUTER_API_KEY=your_openrouter_api_key_here # For proxying LLM requests
OPENAI_API_KEY=your_openai_api_key_here # For direct transcription with GPT-4o-transcribe
XAI_API_KEY=your_xai_api_key_here # For direct xAI Grok API access
ANTHROPIC_API_KEY=your_anthropic_api_key_here # For direct Anthropic Claude API access
GOOGLE_API_KEYS=your_google_ai_api_key_1,your_google_ai_api_key_2 # For Google AI/Gemini API access (comma-separated list)

# Auth0 Configuration (Mandatory)
AUTH0_DOMAIN="your-auth0-tenant.auth0.com"
AUTH0_API_AUDIENCE="https://vibemanager.app"
# Mandatory: Auth0 Machine-to-Machine (M2M) application Client ID for server-side refresh token exchange.
AUTH0_SERVER_CLIENT_ID="your_auth0_server_m2m_app_client_id"
# Mandatory: Auth0 Machine-to-Machine (M2M) application Client Secret for server-side refresh token exchange.
AUTH0_SERVER_CLIENT_SECRET="your_auth0_server_m2m_app_client_secret"
SERVER_AUTH0_CALLBACK_URL="http://localhost:8080/auth/auth0/callback"
SERVER_AUTH0_LOGGED_OUT_URL="http://localhost:8080/auth/auth0/logged-out"

# Authentication Configuration (Mandatory)
JWT_SECRET=a_very_strong_and_long_random_secret_key_for_jwt # Secret key for signing JWTs
JWT_ACCESS_TOKEN_DURATION_DAYS=1 # How long JWTs are valid

# Featurebase SSO Configuration
# Secret key for signing Featurebase SSO tokens - obtain this from your Featurebase Dashboard
FEATUREBASE_SSO_SECRET="your_featurebase_sso_secret_key_here"

# Refresh Token Encryption Configuration (Mandatory)
REFRESH_TOKEN_ENCRYPTION_KEY=a_very_strong_32_byte_secret_key_for_refresh_tokens_in_hex

# Audit Security Configuration (Mandatory for production)
AUDIT_HMAC_SECRET=a_very_strong_and_long_random_secret_key_for_audit_integrity # Secret key for HMAC signatures in audit logs (min 32 chars)

# Redis Configuration (Mandatory)
REDIS_URL=redis://127.0.0.1/ # Redis connection URL for rate limiting and caching

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=60000 # Window for rate limiting in milliseconds (e.g., 60000 for 1 minute)
RATE_LIMIT_MAX_REQUESTS=100 # Max requests per window per IP
RATE_LIMIT_CLEANUP_INTERVAL_SECS=300 # Interval in seconds for cleaning up in-memory rate limit stores

# Account Creation Rate Limiting Configuration
ACCOUNT_CREATION_RATE_LIMIT_WINDOW_MS=3600000 # Window for account creation rate limiting (1 hour)
ACCOUNT_CREATION_RATE_LIMIT_MAX_REQUESTS=5 # Max account creation requests per window per IP

# Auth Store Configuration
POLLING_STORE_EXPIRY_MINS=30 # Expiry time for auth polling store entries
AUTH0_STATE_STORE_EXPIRY_MINS=30 # Expiry time for Auth0 state store entries
AUTH_STORE_CLEANUP_INTERVAL_SECS=300 # Interval for cleaning up expired auth store entries

# Billing Configuration is now stored in database
# See application_configurations table for billing_free_credits_amount and billing_free_credits_expiry_days

# Stripe Configuration (Mandatory for billing features)
STRIPE_SECRET_KEY=sk_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret_here # Used for checkout.session.completed and payment_intent.succeeded events
# Stripe checkout and portal redirect URLs
# For local development: use http://localhost:3000 (website)
# For production: use https://vibemanager.app
STRIPE_CHECKOUT_SUCCESS_URL="http://localhost:3000/(callbacks)/billing/success?session_id={CHECKOUT_SESSION_ID}"
STRIPE_CHECKOUT_CANCEL_URL="http://localhost:3000/(callbacks)/billing/cancel"
STRIPE_PORTAL_RETURN_URL="http://localhost:3000/(callbacks)/billing/payment-method"

# Deep Link Configuration - Used for Stripe checkout callbacks
APP_DEEP_LINK_SCHEME=vibe-manager

# Email Configuration (Mailgun)
MAILGUN_API_KEY=your_mailgun_api_key_here
MAILGUN_DOMAIN=your-domain.com # Your verified domain in Mailgun (e.g., mg.yourdomain.com or sandbox123.mailgun.org)
FROM_EMAIL=noreply@your-domain.com # Email address to send from
FROM_NAME=Vibe Manager # Display name for outgoing emails
MAILGUN_BASE_URL=https://api.mailgun.net # Optional: defaults to https://api.mailgun.net
ADMIN_EMAIL_RECIPIENT=admin@your-domain.com # Email address for admin alert notifications